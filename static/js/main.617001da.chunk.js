(this["webpackJsonprancid-tomatoes"]=this["webpackJsonprancid-tomatoes"]||[]).push([[0],{29:function(t,e,a){},30:function(t,e,a){},31:function(t,e,a){},37:function(t,e,a){},38:function(t,e,a){},39:function(t,e,a){},40:function(t,e,a){},41:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a(1),i=a(22),c=a.n(i),r=(a(29),a(16)),o=a(4),l=a(9),u=a(10),d=a(12),h=a(11),m=(a(30),a(31),a.p+"static/media/rating-star.dbbb2811.svg"),j=a.p+"static/media/plus-symbol.db973228.svg",b=a.p+"static/media/minus-symbol.49ccdae4.svg",v=a(7),p=function(t){var e=t.id,a=t.title,s=t.avgRating,i=t.releaseDate,c=t.posterImg,r=t.onWatchList,o=t.addToWatchList,l=t.removeFromWatchList;return Object(n.jsxs)("section",{"data-testid":"movie-card-".concat(e),id:e,className:"movie-card",children:[Object(n.jsx)(v.b,{to:"/movie/".concat(e),children:Object(n.jsx)("section",{className:"movie-img-container",children:Object(n.jsx)("img",{src:c,className:"poster-img",alt:a})})}),Object(n.jsxs)("section",{className:"movie-info-container",children:[Object(n.jsxs)("h3",{className:"movie-card-title",children:[Object(n.jsx)("img",{className:"watch-list-icon",src:j,alt:"add-to-watch-list-icon",onClick:function(){return o(e)},style:r?{display:"none"}:{display:"inline-block"}}),Object(n.jsx)("img",{className:"watch-list-icon",src:b,alt:"remove-from-watch-list-icon",onClick:function(){return l(e)},style:r?{display:"inline-block"}:{display:"none"}}),a]}),Object(n.jsxs)("section",{className:"average-rating-container",children:[Object(n.jsx)("img",{className:"rating-star-movie-card",src:m,alt:"rating-star-icon"}),Object(n.jsx)("p",{className:"average-rating-text",children:s})]}),Object(n.jsx)("section",{className:"realease-date-container",children:Object(n.jsxs)("p",{className:"release-date-text",children:[i[1]," ",i[2],", ",i[3]," "]})})]})]})},f=(a(37),function(t){var e=t.movies,a=t.addToWatchList,s=t.removeFromWatchList,i=e.map((function(t){var e=new Date(t.release_date).toDateString().split(" ");return Object(n.jsx)(p,{id:t.id,title:t.title,avgRating:t.average_rating.toFixed(1),releaseDate:e,posterImg:t.poster_path,onWatchList:t.onWatchList,addToWatchList:a,removeFromWatchList:s},t.id)}));return Object(n.jsx)("section",{className:"movies-container",children:i})}),O=(a(38),a.p+"static/media/back-button.b42bda0d.svg"),g=a.p+"static/media/runtime-reel.3af85ac9.svg",x=function(t){return fetch(t).then((function(t){if(t.ok)return t.json();throw new Error("Sorry we are having difficulty loading this page, please try again later!")}))},w=function(t,e,a){return fetch(t,{method:e,headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({id:a})}).then((function(t){if(t.ok)return t;throw new Error("Sorry we are having difficulty loading this page, please try again later!")}))},N=function(){return x("https://rancid-tomatillos.herokuapp.com/api/v2/movies")},L=function(t){return x("https://rancid-tomatillos.herokuapp.com/api/v2//movies/".concat(t))},y=function(t){return x("https://rancid-tomatillos.herokuapp.com/api/v2//movies/".concat(t,"/videos"))},k=function(){return x("https://rancid-tomatillos-server-tl.herokuapp.com/watch-list")},W=function(t){return w("https://rancid-tomatillos-server-tl.herokuapp.com/watch-list","POST",t)},S=function(t){return w("https://rancid-tomatillos-server-tl.herokuapp.com/watch-list","DELETE",t)},D=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).handleRest=function(){t.forceUpdate()},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:"Loading..."})}}]),a}(s.Component);D.style=function(t){var e=t.props;return{border:"10px solid #FDFFFC",borderRadius:"100%",height:e.diameter,left:"50%",opacity:e.opacity,position:"absolute",top:"50%",transform:"translateX(-50%) translateY(-50%)",width:e.diameter,zIndex:1}};var F=D,C=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(l.a)(this,a),(t=e.call(this)).getChosenMovieData=function(){var e=t.props.match.params.id;return Promise.all([L(e),y(e)]).then((function(e){var a=e.reduce((function(t,e){return Object(o.a)(Object(o.a)({},t),e)}),{});t.setState({movie:a.movie,video:a.videos[0]})}))},t.formatDate=function(t){return new Date(t).toDateString().split(" ")},t.formatMonetaryInfo=function(t){var e=t/1e6;return t%1e6?e.toFixed(2):e},t.state={movie:null,video:null},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getChosenMovieData()}},{key:"render",value:function(){if(this.state.movie){var t=this.state,e=t.movie,a=t.video,s=e.genres.map((function(t){return Object(n.jsxs)("p",{children:[t," "]},t)})),i=this.formatDate(e.release_date);return Object(n.jsx)("section",{className:"chosen-movie","data-testid":"chosen-movie",children:Object(n.jsxs)("section",{className:"backdrop-img",style:{backgroundImage:"linear-gradient(to right, black, 55%, transparent), url(".concat(e.backdrop_path,")")},children:[Object(n.jsxs)("section",{className:"movie-info",children:[Object(n.jsx)(v.b,{to:"/",children:Object(n.jsx)("img",{"data-testid":"return-btn",className:"back-button-icon",src:O,alt:"back-button-icon"})}),Object(n.jsx)("h3",{children:e.title}),Object(n.jsxs)("section",{className:"numeric-info",children:[Object(n.jsxs)("p",{className:"rating-text",children:[Object(n.jsx)("img",{className:"rating-star",src:m,alt:"rating-star-icon"})," ",e.average_rating.toFixed(1)]}),Object(n.jsxs)("p",{className:"runtime-text",children:[Object(n.jsx)("img",{className:"runtime-reel",src:g,alt:"runtime-reel-icon"}),e.runtime,"min."]}),Object(n.jsxs)("p",{className:"release-date-text-chosen",children:[i[1]," ",i[2],", ",i[3]]})]}),Object(n.jsxs)("p",{className:"overview-text","data-testid":"overview",children:["Overview: ",e.overview]}),Object(n.jsx)("section",{className:"genre","data-testid":"genre",children:s}),Object(n.jsxs)("section",{className:"monetary-info",children:[Object(n.jsxs)("p",{className:"budget-text",children:["Budget: $",this.formatMonetaryInfo(e.budget),"M"]}),Object(n.jsxs)("p",{className:"revenue-text",children:["Revenue: $",this.formatMonetaryInfo(e.revenue),"M"]})]}),Object(n.jsxs)("p",{children:["Tagline: ",e.tagline]})]}),Object(n.jsx)("section",{className:"video-frame",children:Object(n.jsx)("iframe",{className:"video-container",src:"https://youtube.com/embed/".concat(a.key),alt:"trailer-iframe-video-player",title:"trailer-video-player",height:"400",width:"700"})})]})})}return Object(n.jsx)(F,{})}}]),a}(s.Component),M=a(2),T=a(15),I=a.p+"static/media/rancid-tomatillos.5ac5c3c3.png",_=(a(39),function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(l.a)(this,a),(t=e.call(this)).handleClick=function(e){e.preventDefault(),t.props.sortMovies()},t.handleOnChange=function(e){var a=e.target,n=a.name,s=a.value;t.setState(Object(T.a)({},n,s.toLowerCase()))},t.handleSubmit=function(e){e.preventDefault();var a=t.state.search,n=t.props.movies.filter((function(t){return t.title.toLowerCase().includes(a)}));t.setState({search:""}),t.props.getSearchedMovies(n)},t.state={search:""},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.props,e=t.getSearchedMovies,a=t.sortStatus;return Object(n.jsxs)("nav",{className:"nav-bar",children:[Object(n.jsxs)("section",{className:"nav-top",children:[Object(n.jsx)("img",{className:"logo",src:I,alt:"logo",height:"75px",width:"225px",onClick:function(){return e([])}}),Object(n.jsxs)("form",{onSubmit:this.handleSubmit,className:"filter-inputs",children:[Object(n.jsxs)("div",{className:"search-input-wrap",children:[Object(n.jsx)("input",{className:"search-input",id:"search",placeholder:"MOVIE NAME",name:"search",value:this.state.search,onChange:this.handleOnChange}),Object(n.jsx)("label",{htmlFor:"search"})]}),Object(n.jsx)("input",{className:"search-button",type:"submit",value:"search"})]})]}),Object(n.jsxs)("section",{className:"nav-bottom",children:[Object(n.jsx)("button",{className:"sort-button",onClick:this.handleClick,children:a?"Oldest - Newest":"Newest - Oldest"}),Object(n.jsx)(v.b,{to:"/watch-list",children:Object(n.jsx)("button",{className:"watch-list-button",children:"Watch List"})})]})]})}}]),a}(s.Component)),E=function(){return Object(n.jsx)("p",{style:{color:"#FFF"},children:"ERROR!!!!!!!!"})},R=(a(40),function(t){var e=t.watchListMovies,a=t.addToWatchList,s=t.removeFromWatchList,i=e();if(i.length){var c=i.map((function(t){var e=new Date(t.release_date).toDateString().split(" ");return Object(n.jsx)(p,{id:t.id,title:t.title,avgRating:t.average_rating.toFixed(1),releaseDate:e,posterImg:t.poster_path,onWatchList:t.onWatchList,addToWatchList:a,removeFromWatchList:s},t.id)}));return Object(n.jsxs)("section",{className:"watch-list-movies-container",children:[Object(n.jsx)(v.b,{to:"/",children:Object(n.jsx)("img",{"data-testid":"return-btn",className:"back-button-icon",src:O,alt:"back-button-icon"})}),c]})}return Object(n.jsxs)("section",{className:"watch-list-empty",children:[Object(n.jsx)(v.b,{to:"/",children:Object(n.jsx)("img",{"data-testid":"return-btn",className:"back-button-icon",src:O,alt:"back-button-icon"})}),Object(n.jsx)("p",{className:"watch-list-empty-prompt",children:"No movies in your watch list. Please add to list!"})]})}),q=function(t){Object(d.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(l.a)(this,a),(t=e.call(this)).getData=function(){var e;Promise.all([N(),k()]).then((function(a){var n=a.reduce((function(t,e){return Object(o.a)(Object(o.a)({},t),e)}),{});e=n.watchListIds.length?n.movies.map((function(t){return n.watchListIds.includes(t.id)?Object(o.a)(Object(o.a)({},t),{},{onWatchList:!0}):Object(o.a)(Object(o.a)({},t),{},{onWatchList:!1})})):n.movies.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{onWatchList:!1})})),t.setState({movies:e,watchList:n.watchListIds,loaded:!0})})).catch((function(e){return t.setState({error:e.message})}))},t.sortMovies=function(){var e=t.state.queries.length?Object(r.a)(t.state.queries):Object(r.a)(t.state.movies);t.state.sorted?e.sort((function(t,e){return new Date(t.release_date)-new Date(e.release_date)})):e.sort((function(t,e){return new Date(e.release_date)-new Date(t.release_date)})),t.state.queries.length?t.setState((function(t){return{queries:e,sorted:!t.sorted}})):t.setState((function(t){return{movies:e,sorted:!t.sorted}}))},t.getSearchedMovies=function(e){t.setState({queries:e})},t.addToWatchList=function(e){W(e).then((function(){return t.updateWatchStatus(e)})).catch((function(e){return t.setState({error:e.message})}))},t.removeFromWatchList=function(e){S(e).then((function(){return t.updateWatchStatus(e)})).catch((function(e){return t.setState({error:e.message})}))},t.updateWatchStatus=function(e){var a=Object(r.a)(t.state.movies).map((function(t){return t.id===e?Object(o.a)(Object(o.a)({},t),{},{onWatchList:!t.onWatchList}):t}));k().then((function(e){t.setState({movies:a,watchList:e.watchListIds})}))},t.getWatchList=function(){var e=t.state,a=e.movies;return e.watchList.reduce((function(t,e){return a.forEach((function(a){a.id===e&&t.push(a)})),t}),[])},t.state={movies:[],queries:[],watchList:[],sorted:!1,error:"",loaded:!1},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var t=this,e=this.state,a=e.movies,s=e.queries,i=e.sorted,c=e.error,r=e.loaded,o=s.length?s:a;return Object(n.jsxs)("main",{className:"App",children:[c&&Object(n.jsx)(E,{}),!r&&Object(n.jsx)(F,{}),Object(n.jsx)(M.a,{path:"/",exact:!0,render:function(){return Object(n.jsx)(_,{movies:o,getSearchedMovies:t.getSearchedMovies,sortMovies:t.sortMovies,sortStatus:i})}}),Object(n.jsx)(M.a,{path:"/",exact:!0,render:function(){return Object(n.jsx)(f,{movies:o,addToWatchList:t.addToWatchList,removeFromWatchList:t.removeFromWatchList})}}),Object(n.jsx)(M.a,{path:"/movie/:id",component:C}),Object(n.jsx)(M.a,{path:"/watch-list",render:function(){return Object(n.jsx)(R,{watchListMovies:t.getWatchList,addToWatchList:t.addToWatchList,removeFromWatchList:t.removeFromWatchList})}})]})}}]),a}(s.Component),P=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,42)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),n(t),s(t),i(t),c(t)}))};c.a.render(Object(n.jsx)(v.a,{children:Object(n.jsx)(q,{})}),document.getElementById("root")),P()}},[[41,1,2]]]);
//# sourceMappingURL=main.617001da.chunk.js.map